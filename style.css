/* ==================================================================
   Budget Tracker — Modern Fintech Theme CSS
   ------------------------------------------------------------------
   Design goals:
   • Distinctive yet clean fintech aesthetic (soft neutrals + vibrant brand gradient).
   • Consistent, accessible form controls w/ floating labels.
   • Tokenized design system: colour, spacing, radius, typography, shadow.
   • Smooth light↔dark theme w/ user toggle (already wired in JS).
   • Responsive layout + reduced-motion support.
   • Visual polish to summary cards, budget bars, and entry list.
   ------------------------------------------------------------------
   Implementation notes:
   • Retains your existing class names so HTML changes are minimal.
   • Introduces utility classes (.btn, .btn-ghost, .sr-only, .visually-hidden).
   • Chart colours exposed as CSS vars; update Chart.js config to read them.
   • Uses modern CSS (clamp(), color-mix(), :where(), :is()). Safe fallbacks included.
   ================================================================== */

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Rubik:wght@500;700&display=swap');

/* ------------------------------------------------------------------
   1. Root Design Tokens (Light Theme)
   ------------------------------------------------------------------ */
:root {
  /* Brand gradient endpoints */
  --brand-1: hsl(226 100% 55%);           /* primary base */
  --brand-2: hsl(266 100% 60%);           /* secondary tint */
  --brand-3: hsl(198 100% 50%);           /* teal accent */

  /* Functional colours */
  --success: hsl(151 70% 40%);            /* income */
  --success-bg: hsl(151 70% 92%);
  --danger:  hsl(355 75% 54%);            /* expense */
  --danger-bg:hsl(355 75% 94%);
  --warning: hsl(35 95% 55%);
  --info:    hsl(198 100% 40%);

  /* Surfaces */
  --bg: hsl(220 23% 96%);
  --bg-alt: hsl(220 23% 99%);
  --card: hsl(0 0% 100%);
  --card-alt: hsl(220 23% 98%);
  --card-border: hsl(220 10% 85%);

  /* Text */
  --text: hsl(222 25% 20%);
  --text-2: hsl(222 12% 35%);
  --text-3: hsl(222 10% 50%);
  --text-invert: #fff;

  /* Charts */
  --chart-income: var(--success);
  --chart-expense: var(--danger);
  --chart-balance: var(--brand-1);

  /* Spacing scale */
  --sp-0: 0;
  --sp-1: 0.25rem;
  --sp-2: 0.5rem;
  --sp-3: 0.75rem;
  --sp-4: 1rem;
  --sp-5: 1.5rem;
  --sp-6: 2rem;
  --sp-7: 3rem;

  /* Radius scale */
  --rad-xs: 3px;
  --rad-sm: 6px;
  --rad-md: 10px;
  --rad-lg: 16px;
  --rad-xl: 24px;

  /* Shadows */
  --shadow-sm: 0 1px 3px rgba(0,0,0,.08);
  --shadow-md: 0 4px 16px rgba(0,0,0,.08);
  --shadow-lg: 0 8px 32px rgba(0,0,0,.12);

  /* Typography scale (fluid) */
  --fs-xs: clamp(.75rem,.72rem + .1vw,.8rem);
  --fs-sm: clamp(.875rem,.84rem + .2vw,.95rem);
  --fs-md: clamp(1rem,.96rem + .2vw,1.05rem);
  --fs-lg: clamp(1.25rem,1.1rem + .6vw,1.5rem);
  --fs-xl: clamp(1.75rem,1.5rem + 1vw,2rem);
  --fs-xxl: clamp(2.25rem,1.9rem + 2vw,3rem);

  /* Durations */
  --dur-fast: .15s;
  --dur-med: .25s;
  --dur-slow: .4s;
}

/* ------------------------------------------------------------------
   2. Dark Theme Overrides
   ------------------------------------------------------------------ */
body.dark-mode {
  --bg: hsl(222 30% 8%);
  --bg-alt: hsl(222 30% 12%);
  --card: hsl(222 28% 14%);
  --card-alt: hsl(222 28% 18%);
  --card-border: hsl(222 15% 25%);

  --text: hsl(220 20% 96%);
  --text-2: hsl(220 15% 80%);
  --text-3: hsl(220 10% 65%);
  --text-invert: #fff;

  --success-bg: color-mix(in srgb, var(--success) 20%, transparent);
  --danger-bg:  color-mix(in srgb, var(--danger)  20%, transparent);

  --shadow-sm: 0 1px 2px rgba(0,0,0,.6);
  --shadow-md: 0 4px 12px rgba(0,0,0,.6);
  --shadow-lg: 0 8px 28px rgba(0,0,0,.7);
}

/* ------------------------------------------------------------------
   3. Global Resets & Base
   ------------------------------------------------------------------ */
*{box-sizing:border-box;margin:0;padding:0;}
html{scroll-behavior:smooth;}
body{
  background:var(--bg);
  color:var(--text);
  font-family:'Inter',system-ui,sans-serif;
  line-height:1.45;
  -webkit-font-smoothing:antialiased;
  transition:background var(--dur-med) ease,color var(--dur-med) ease;
}

:focus-visible{outline:2px solid var(--brand-2);outline-offset:2px;}

img,svg,canvas{max-width:100%;display:block;}

.container{max-width:min(90ch,100%);margin-inline:auto;padding:var(--sp-6) var(--sp-4);}

/* screen reader only utility */
.sr-only{position:absolute!important;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0;}

/* ------------------------------------------------------------------
   4. Header
   ------------------------------------------------------------------ */
header{
  display:flex;flex-direction:column;align-items:flex-start;gap:var(--sp-2);
  margin-bottom:var(--sp-6);
}
header h1{
  font-family:'Rubik',sans-serif;
  font-size:var(--fs-xl);font-weight:700;
  background:linear-gradient(135deg,var(--brand-1),var(--brand-2));
  -webkit-background-clip:text;background-clip:text;color:transparent;
  line-height:1.1;margin-bottom:var(--sp-1);
}
header p{color:var(--text-2);font-size:var(--fs-sm);max-width:45ch;}

.header-actions{display:flex;flex-wrap:wrap;gap:var(--sp-2);margin-top:var(--sp-2);}
.header-actions button{font-size:var(--fs-sm);} /* actual styles in .btn below */

/* ------------------------------------------------------------------
   5. Buttons System
   ------------------------------------------------------------------ */
.btn{--_bg:var(--card-alt);--_bg-hover:var(--card);--_fg:var(--text);--_bd:var(--card-border);
  display:inline-flex;align-items:center;justify-content:center;gap:.35em;
  padding:.55em 1.1em;font-weight:600;font-size:var(--fs-sm);
  border:1px solid var(--_bd);border-radius:var(--rad-sm);cursor:pointer;
  background:var(--_bg);color:var(--_fg);text-decoration:none;line-height:1.1;
  transition:background var(--dur-fast),border-color var(--dur-fast),transform var(--dur-fast);
}
.btn:hover{background:var(--_bg-hover);}
.btn:active{transform:scale(.96);}

.btn-primary{--_bg:linear-gradient(to right,var(--brand-1),var(--brand-2));--_bg-hover:linear-gradient(to right,var(--brand-2),var(--brand-1));--_fg:var(--text-invert);--_bd:transparent;color:var(--text-invert);border:none;}
.btn-ghost{--_bg:transparent;--_bg-hover:var(--card-alt);--_bd:var(--card-border);}
.btn-icon{padding:.45em;font-size:1.1em;width:2.25em;height:2.25em;}

/* Map legacy header-actions buttons */
.header-actions button{all:unset;}
.header-actions button{display:inline-block}

.header-actions #themeToggle{padding:.5rem;border-radius:50%;border:1px solid var(--card-border);background:var(--card-alt);cursor:pointer;transition:background var(--dur-fast);}/* fallback */
.header-actions #themeToggle:hover{background:var(--card);}


#exportBtn,#importBtn,#budgetBtn{ /* fallback */
  padding:.55em 1.1em;border:1px solid var(--card-border);border-radius:var(--rad-sm);background:var(--card-alt);cursor:pointer;font-size:var(--fs-sm);}
#exportBtn:hover,#importBtn:hover,#budgetBtn:hover{background:var(--card);}

/* ------------------------------------------------------------------
   6. Form (Floating Labels)
   ------------------------------------------------------------------ */
form{
  width:100%;
  display:grid;grid-template-columns:1fr 1fr;grid-template-areas:
    'desc desc'
    'amt type'
    'cat repeat'
    'submit submit';
  gap:var(--sp-4);
  background:var(--card);padding:var(--sp-5);border-radius:var(--rad-md);
  box-shadow:var(--shadow-md);
}

@media (max-width:600px){
  form{grid-template-columns:1fr;grid-template-areas:
    'desc' 'amt' 'type' 'cat' 'repeat' 'submit';}
}

.field{position:relative;width:100%;}
.field input,.field select{
  width:100%;
  padding:1.35rem var(--sp-4) .55rem;
  font-size:var(--fs-md);
  border:1px solid var(--card-border);
  border-radius:var(--rad-sm);
  background:var(--card-alt);
  color:var(--text);
  appearance:none;
  transition:border-color var(--dur-fast),background var(--dur-fast),box-shadow var(--dur-fast);
}
.field input::placeholder{color:transparent;}
.field select:invalid{color:var(--text-3);} /* placeholder colour */
.field input:focus,.field select:focus{border-color:var(--brand-1);background:var(--card);box-shadow:0 0 0 3px color-mix(in srgb,var(--brand-1) 25%,transparent);}

.field label{
  position:absolute;left:var(--sp-4);top:1.1rem;
  font-size:var(--fs-md);line-height:1;color:var(--text-3);
  pointer-events:none;transition:all var(--dur-fast) ease;
}
.field input:focus + label,
.field input:not(:placeholder-shown)+label,
.field select:focus + label,
.field select:not([value=""]) + label{
  top:.35rem;font-size:var(--fs-xs);color:var(--brand-1);letter-spacing:.01em;
}

.field small.error{display:block;margin-top:var(--sp-1);font-size:var(--fs-xs);color:var(--danger);}/* error msg */
.error[hidden]{display:none!important}

/* Map grid areas (IDs expected in HTML) */
#descInput.field,#name.field{grid-area:desc;} /* fallback ID mapping if needed */
#amountInput.field{grid-area:amt;}
#typeInput.field{grid-area:type;}
#categoryInput.field{grid-area:cat;}
#repeatInput{grid-area:repeat;}
button[type="submit"]{grid-area:submit;}

/* Submit button */
button[type=submit]{
  align-self:stretch;
  font-size:var(--fs-md);font-weight:600;
  padding:1rem 1.4rem;border-radius:var(--rad-sm);
  background:linear-gradient(to right,var(--brand-1),var(--brand-2));
  color:var(--text-invert);border:none;cursor:pointer;
  transition:filter var(--dur-fast),transform var(--dur-fast);
}
button[type=submit]:hover{filter:brightness(1.05);} 
button[type=submit]:active{transform:scale(.97);} 

/* ------------------------------------------------------------------
   7. Summary Cards + Budget Bars
   ------------------------------------------------------------------ */
.summary-section{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));
  gap:var(--sp-4);margin-block:var(--sp-6);
}
.sum-card{
  background:var(--card);padding:var(--sp-4) var(--sp-5);
  border-radius:var(--rad-md);box-shadow:var(--shadow-sm);
  position:relative;overflow:hidden;
}
.sum-card::before{
  content:"";position:absolute;inset:0;opacity:.08;pointer-events:none;
  background:linear-gradient(135deg,var(--brand-1),var(--brand-2));
}
.sum-card h3{font-size:var(--fs-sm);font-weight:600;color:var(--text-2);margin-bottom:var(--sp-1);}
.sum-card .amt{font-size:var(--fs-lg);font-weight:700;}
.sum-card.income{border-left:4px solid var(--success);} 
.sum-card.expense{border-left:4px solid var(--danger);} 
.sum-card.balance{border-left:4px solid var(--brand-1);} 

/* Budget progress bars (rendered in JS into #budgetBars) */
#budgetBars{margin-top:var(--sp-5);display:flex;flex-direction:column;gap:var(--sp-3);} 
.budget-row{display:grid;grid-template-columns:auto auto 1fr;align-items:center;gap:var(--sp-3);font-size:var(--fs-sm);} 
.budget-row span{white-space:nowrap;} 
.budget-row .bar{width:100%;height:8px;background:var(--card-alt);border-radius:var(--rad-xs);overflow:hidden;position:relative;} 
.budget-row .bar div{height:100%;background:var(--success);transition:width var(--dur-med) ease;} 
.budget-row.over .bar div{background:var(--danger);} 
.budget-row.over .bar::after{content:"";position:absolute;inset:0;background:repeating-linear-gradient(-45deg,transparent 0 6px,rgba(255,255,255,.35) 6px 12px);mix-blend-mode:overlay;} 

/* ------------------------------------------------------------------
   8. Filter Row
   ------------------------------------------------------------------ */
.filter-section{display:flex;align-items:center;gap:var(--sp-2);margin-block:var(--sp-6) var(--sp-4);flex-wrap:wrap;}
.filter-section select{
  padding:.65rem 2.2rem .65rem var(--sp-4);
  font-size:var(--fs-sm);border:1px solid var(--card-border);border-radius:var(--rad-sm);background:var(--card-alt);color:var(--text);}
.filter-section select:focus{border-color:var(--brand-1);background:var(--card);} 

/* ------------------------------------------------------------------
   9. Chart Card
   ------------------------------------------------------------------ */
.chart-section{
  background:var(--card);padding:var(--sp-5);border-radius:var(--rad-md);box-shadow:var(--shadow-sm);
  max-width:480px;margin-inline:auto;margin-block:var(--sp-6);
}
.chart-section canvas{width:100%!important;height:auto!important;max-height:300px;} 

/* Provide colours for custom legends (if you add them) */
.chart-legend{display:flex;justify-content:center;gap:var(--sp-4);margin-top:var(--sp-3);font-size:var(--fs-xs);}
.chart-legend span{display:inline-flex;align-items:center;gap:.35em;}
.chart-legend i{width:12px;height:12px;border-radius:2px;display:inline-block;}
.chart-legend .inc i{background:var(--chart-income);} 
.chart-legend .exp i{background:var(--chart-expense);} 
.chart-legend .bal i{background:var(--chart-balance);} 

/* ------------------------------------------------------------------
   10. Entries List
   ------------------------------------------------------------------ */
.entries-section ul{list-style:none;padding:0;margin:0;}
.month-header{margin-block:var(--sp-6) var(--sp-2);font-weight:600;font-size:var(--fs-sm);color:var(--text-2);}

.entry{background:var(--card);display:grid;grid-template-columns:6.5ch 9ch 1fr minmax(6ch,auto) 2.5ch;align-items:center;gap:var(--sp-2);padding:var(--sp-3) var(--sp-4);border-radius:var(--rad-sm);box-shadow:var(--shadow-sm);margin-bottom:var(--sp-2);position:relative;}
.entry.income{border-left:4px solid var(--success);} 
.entry.expense{border-left:4px solid var(--danger);} 
.entry._recurring::after{content:"⟳";position:absolute;top:4px;right:28px;font-size:var(--fs-xs);opacity:.65;} 
.entry-date{font-size:var(--fs-xs);color:var(--text-3);} 
.entry-category{font-weight:600;text-transform:capitalize;font-size:var(--fs-sm);color:var(--text-2);} 
.entry-desc{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:var(--fs-sm);} 
.entry-amt{text-align:right;font-weight:700;font-size:var(--fs-sm);} 
.entry button{background:none;border:0;font-size:1.15rem;color:var(--text-3);cursor:pointer;line-height:1;} 
.entry button:hover{color:var(--danger);} 

@media (max-width:560px){
  .entry{grid-template-columns:1fr auto auto;grid-template-areas:
    'desc amt del'
    'cat date date';
  padding:var(--sp-4) var(--sp-4);}
  .entry-desc{grid-area:desc;}
  .entry-amt{grid-area:amt;text-align:right;}
  .entry button{grid-area:del;justify-self:end;}
  .entry-category{grid-area:cat;margin-top:var(--sp-1);} 
  .entry-date{grid-area:date;text-align:left;}
}

/* ------------------------------------------------------------------
   11. Budget Dialog
   ------------------------------------------------------------------ */
#budgetDlg{border:none;border-radius:var(--rad-md);padding:var(--sp-6) var(--sp-5);box-shadow:var(--shadow-lg);max-width:340px;width:90%;background:var(--card);color:var(--text);}
#budgetDlg h2{margin-bottom:var(--sp-4);font-size:var(--fs-lg);font-family:'Rubik',sans-serif;font-weight:600;}
#budgetFields{display:flex;flex-direction:column;gap:var(--sp-3);max-height:50vh;overflow-y:auto;padding-right:.25rem;}
#budgetFields label{display:flex;justify-content:space-between;align-items:center;gap:var(--sp-2);font-size:var(--fs-sm);}
#budgetFields input{width:110px;text-align:right;padding:.45rem .4rem;font-size:var(--fs-sm);border:1px solid var(--card-border);border-radius:var(--rad-xs);background:var(--card-alt);color:var(--text);} 
#budgetDlg footer{display:flex;justify-content:flex-end;gap:var(--sp-2);margin-top:var(--sp-5);} 
#budgetDlg footer button{font-size:var(--fs-sm);} 

#budgetDlg::backdrop{background:rgba(0,0,0,.35);} 

/* ------------------------------------------------------------------
   12. Misc / Helpers
   ------------------------------------------------------------------ */
body.loading{cursor:progress;}
.fade-in{animation:fade-in var(--dur-med) ease both;} 

@keyframes fade-in{from{opacity:0;transform:translateY(4px);}to{opacity:1;transform:none;}}

/* honour reduced motion */
@media (prefers-reduced-motion:reduce){
  *{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important;}
}

/* ------------------------------------------------------------------
   13. Legacy compatibility overrides
   ------------------------------------------------------------------ */
/* maintain old selectors so nothing breaks while HTML still references them */
.header-actions button:hover{color:var(--text-invert);} /* keep hover contrast */

/* repeat field minor padding fix */
.field select#repeatInput{padding-right:2.2rem;}

/* End of file */
